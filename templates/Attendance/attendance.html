<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Take Attendence</title>
	<link rel="stylesheet" href="{% static 'css/style.css' %}">
	<!-- <link rel="stylesheet" href="{% static 'csss/bootstrap.min.css' %}"> -->
	<link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
		crossorigin="anonymous"></script>
	<script>
		var date = new Date();
		var today = new Date(date.getFullYear(), date.getMonth(), date.getDate());

		var optSimple = {
		format: 'mm-dd-yyyy',
		todayHighlight: true,
		orientation: 'bottom right',
		autoclose: true,
		container: '#sandbox'
		};
		$('#simple').datepicker(optSimple);
		$('#simple').datepicker('setDate',today);
		function f1(a, b, c) {
			console.log("Hello");
			var x = document.getElementById("passdate").value;
			var z = document.getElementById("sub").value;
			window.location.href = `http://localhost:8000/Attendance/save_attendance/${a}/${b}/${c}/${z}/${x}/`
		}
		function f2(a, b, c) {
			console.log("Hello");
			var x = document.getElementById("passdate").value;
			var z = document.getElementById("sub").value;
			window.location.href = `http://localhost:8000/Attendance/save_attendance/${a}/${b}/${c}/${z}/${x}/`
		}
		
		// x = "After Selecting Subject & Date u have to just select checkbox for register attendace of student Selection of 2nd time it will not be consider";
		// alert(x);
		
	</script>

</head>

<body>


	<div class="container content2">

		<div class="row">
			<div class="col-md-12 col-lg-12">
				<h3 class="page-header"><b>Take Attendance</b></h3>
			</div>
		</div>
		<br>
		<div class="row">
			<div class="col-md-12 col-lg-12">
				<form action="http://localhost:8000/Attendance/save/" method="post">
					{% csrf_token %}
					<label for="select" class="control-label">Subject:</label>
					<select id="sub" name='subject' class='form-control' required='required' style="width: 31%">
						<option value="MC" selected='selected'>Mobile Computing</option>
						<option value="CGMA">CGMA</option>
						<option value="PHP">PHP/MySQL</option>
						<option value="AI">Artificial Intelligence</option>
					</select>
			</div>
			<!-- <div id="sandbox" class="form-group" data-provide="datepicker" style="width: 30%">
				<label for="simple">Date</label>
				<input id="simple" type="date" class="form-control" value="">{% if d %}<p style="color: hotpink;">{{d}} Attendance Added Successfully!!</p>{%endif%}
		  </div> -->
			<div class="form-group" data-provide="datepicker" style="width: 31%">
				<label for="select" class="control-label">Date:</label>
				<input id="passdate" type="text" class="form-control" name="date" value="{{date}}" required> {% if d %}<p style="color: hotpink;">{{d}} Attendance Added Successfully!!</p>{%endif%}
			</div>
			<br><br>
			<table class="table table-striped table-hover">
				<thead>
					<tr>
						<th>Roll No</th>
						<th>Name</th>
						<th>Is Present</th>
						<th>Is Absent</th>
					</tr>
				</thead>
				<tbody>
					{% for s in data %}
					<tr>
						<td>{{s.stu_id}}</td>
						<td>{{s.student_name}}</td>
						<td>
							{% if name == "{{s.student_name}}" and atd %}
							<p style="color: green;">Present</p>
							{% elif name == "{{s.student_name}}" or atd %}
							<p style="color: red;">Absent</p>
							{% else %}
							<input onclick="f1(a='{{s.stu_id}}',b='{{s.student_name}}',c='1')" class='chk-present'
								type='checkbox' name='atd'>
						</td>
						<td><input onclick="f2(a='{{s.stu_id}}',b='{{s.student_name}}',c='0')" class='chk-present'
								type='checkbox' name='atd'></td>
						{% endif %}
					</tr>
					{% endfor %}

				</tbody>
			</table>

			<input type="submit" class="btn btn-primary btn-block"
				style="background-color: #9933ff; border-radius: 10px; color:white;" value="Save Attendance">

			</form>

		</div>
	</div>
	</div>

	<script>
		$('#subjectForm').validator();	
	</script>
</body>

</html>